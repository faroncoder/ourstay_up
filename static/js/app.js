!function(){"use strict";angular.module("ourstay",["ngAnimate","ngSanitize","ngRoute","slickCarousel","pageslide-directive"]).filter("phonefilter",function(){return function(e){return angular.isString(e)?e.replace(/[\s]/g,""):e}}).config(["$httpProvider","$compileProvider",function(e,r){delete e.defaults.headers.common["X-Requested-With"],r.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel|sms):/)}])}(),function(){"use strict";function e(e,r,t,n,o,a,i){function l(e){t.goTo(t.sections.EXPLORE,{propertyId:e}),o.setTheme(e)}function c(){o.setTheme(),r.fetchPropertiesByBrand(1).then(function(e){s.fsProperties=e})}var s=this;s.fsProperties=[],s.properties=[{name:"Miami",id:e.MIAMI_ID,imageUrl:"/static/images/logo-hyatt-centric-miami-home_2x.png",bgUrl:(window.devicePixelRatio>1,"/static/images/hyatt-miami_2x.jpg")},{name:"Chicago",id:e.CHICAGO_ID,imageUrl:"/static/images/logo-hyatt-centric-chicago-home_2x.png",bgUrl:(window.devicePixelRatio>1,"/static/images/hyatt-chicago_2x.jpg")}],s.onClick=l,s.onChange=function(e){a.path("/property/"+e.propertyid+"/explore")},c()}angular.module("ourstay").controller("WelcomeController",e),e.$inject=["ConfigService","APIService","NavService","GeoLocationService","ThemeService","$location","$http"]}(),function(){"use strict";function e(e,r){var t={isSet:!1,logo:"logo-hyatt-centric_2x",brand:"four-seasons",property:"four-seasons"},n=function(n){var o=parseInt(n);switch(o){case e.MIAMI_ID:t.logo="hyatt-miami-logo",t.brand="hyatt",t.property="hyatt-miami",t.isSet=!0;break;case e.CHICAGO_ID:t.logo="hyatt-chicago-logo",t.brand="hyatt",t.property="hyatt-chicago",t.isSet=!0;break;case e.FS_ID:t.logo="four-seasons-logo",t.brand="four-seasons",t.property="four-seasons",t.isSet=!0;break;default:t.logo="four-seasons-logo",t.brand="four-seasons",t.property="four-seasons"}r.publish({action:"setTheme"})};return{theme:t,setTheme:n}}angular.module("ourstay").factory("ThemeService",e),e.$inject=["ConfigService","PubSubService"]}(),function(){"use strict";function e(e,r){function t(){this.id=null,this.typeId=null,this.name=null,this.shortDescription=null,this.secondWhy=null,this.description=null,this.url=null,this.primaryImageUrl=null,this.walkingMinutesFromHotel=null,this.drivingMinutesFromHotel=null,this.startPointLabel=null,this.drivingMinutes=null,this.walkingMinutes=null,this.lat=null,this.lng=null,this.images=[],this.street1=null,this.street2=null,this.street3=null,this.city=null,this.state=null,this.postalCode=null,this.country=null,this.phone=null,this.meetTheUrl=null,this.meetTheFirstName=null,this.meetTheName=null,this.meetTheTagline=null,this.meetTheDescription=null,this.meetTheTypeId=null,this.nearby=[],this.operatingHours=[],this.relatedCategories=[],this.externalServices=[],this.localista=null,this.localistaRecommendations=[],this.recommenders=[]}return t.prototype.toJSON=function(){return{}},t.prototype.init=function(n){if(n.hasOwnProperty("objectid")&&(this.id=parseInt(n.objectid)),n.hasOwnProperty("histreeid")&&(this.id=parseInt(n.histreeid)),n.hasOwnProperty("imageurl")&&(this.primaryImageUrl=n.imageurl),n.hasOwnProperty("historyurl")&&(this.primaryImageUrl=n.historyurl),n.hasOwnProperty("walkingminutesfromhotel")&&(e.isNull(n.walkingminutesfromhotel)||e.isBoolean(n.walkingminutesfromhotel)||""==n.walkingminutesfromhotel||(this.walkingMinutesFromHotel=parseInt(n.walkingminutesfromhotel))),n.hasOwnProperty("drivingminutesfromhotel")&&(e.isNull(n.drivingminutesfromhotel)||e.isBoolean(n.drivingminutesfromhotel)||""==n.drivingminutesfromhotel||(this.drivingMinutesFromHotel=parseInt(n.drivingminutesfromhotel))),n.hasOwnProperty("objecttypeid")&&(this.typeId=parseInt(n.objecttypeid)),n.hasOwnProperty("url")&&(this.url=n.url),n.hasOwnProperty("website")&&(this.url=n.website),n.hasOwnProperty("objectname")&&(this.name=n.objectname),n.hasOwnProperty("name")&&(this.name=n.name),n.hasOwnProperty("description")){for(var o=n.description.split(/\n/),a=0;a<o.length;a++)""==o[a]&&o.splice(a,1);this.description=o}if(n.hasOwnProperty("latitude")&&(this.lat=n.latitude),n.hasOwnProperty("longitude")&&(this.lng=n.longitude),n.hasOwnProperty("physicaladdressstreet1")&&(this.street1=n.physicaladdressstreet1),n.hasOwnProperty("physicaladdressstreet2")&&(this.street2=n.physicaladdressstreet2),n.hasOwnProperty("physicaladdressstreet3")&&(this.street3=n.physicaladdressstreet3),n.hasOwnProperty("physicaladdresscity")&&(this.city=n.physicaladdresscity),n.hasOwnProperty("physicaladdressstate")&&(this.state=n.physicaladdressstate),n.hasOwnProperty("physicaladdresspostalcode")&&(this.postalCode=n.physicaladdresspostalcode),n.hasOwnProperty("physicaladdresscountry")&&(this.country=n.physicaladdresscountry),n.hasOwnProperty("physicaladdressphone")&&(this.phone=n.physicaladdressphone),n.hasOwnProperty("recommendationassets")){for(var i in n.recommendationassets){var l=null,c=null;c=n.recommendationassets[i],n.hasOwnProperty("fsrecommendationassets")&&n.fsrecommendationassets.hasOwnProperty(i)&&(l=n.fsrecommendationassets[i]),this.images.push({thumb:c,large:l})}this.images.length>=2&&(this.primaryImageUrl=this.images[1].thumb)}if(n.hasOwnProperty("whyrecommended")&&e.isArray(n.whyrecommended)&&n.whyrecommended.length>0&&(this.shortDescription=n.whyrecommended[0]),n.hasOwnProperty("whyrecommended")&&e.isArray(n.whyrecommended)&&n.whyrecommended.length>1&&(this.secondWhy=n.whyrecommended[1]),n.hasOwnProperty("meettheurl")&&""!=n.meettheurl&&(this.meetTheUrl=n.meettheurl),n.hasOwnProperty("meetthefname")&&(this.meetTheFirstName=n.meetthefname),n.hasOwnProperty("meetthefname")&&n.hasOwnProperty("meetthelname")&&(this.meetTheName=n.meetthefname+" "+n.meetthelname),n.hasOwnProperty("meetthereason1")&&(this.meetTheTagline=n.meetthereason1.replace(/(")+/g,'"')),n.hasOwnProperty("meetthedescription")&&(this.meetTheDescription=n.meetthedescription),n.hasOwnProperty("meetthetypeid")&&(this.meetTheTypeId=n.meetthetypeid),n.hasOwnProperty("openclosetimes"))for(var s=0;s<n.openclosetimes.length;s++){var d=n.openclosetimes[s],u={dayOfWeek:null,openTimeDay:null,closeTimeDay:null,openTimeNight:null,closeTimeNight:null,closed:!1};if(u.dayOfWeek=parseInt(d.dayofweek),""!=d.opentimeday&&null!=d.opentimeday){var m=d.opentimeday.split(":");u.openTimeDay=new Date(1970,0,1,m[0],m[1],m[2])}if(""!=d.closetimeday&&null!=d.closetimeday){var m=d.closetimeday.split(":");u.closeTimeDay=new Date(1970,0,1,m[0],m[1],m[2])}if(""!=d.opentimenight&&null!=d.opentimenight){var m=d.opentimenight.split(":");u.openTimeNight=new Date(1970,0,1,m[0],m[1],m[2])}if(""!=d.closetimenight&&null!=d.closetimenight){var m=d.opentimenight.split(":");u.closeTimeNight=new Date(1970,0,1,m[0],m[1],m[2])}u.closed=d.closed,this.operatingHours.push(u)}if(n.hasOwnProperty("nearby"))for(var p=0;p<n.nearby.data.length;p++){var f=new t;f.init(n.nearby.data[p][0]),this.nearby.push(f)}if(n.hasOwnProperty("moods"))for(var g=0;g<n.moods.length;g++){var h=n.moods[g].replace("(","").replace(")","").split(","),y={id:parseInt(h[0]),name:h[1]};this.relatedCategories.push(y)}if(n.hasOwnProperty("externalserviceid")){var v=1===parseInt(n.externalservicetypeid)?"openTable":"grubHub",b={id:n.externalserviceid,label:v,url:null};"openTable"===v&&(b.url="http://www.opentable.com/"+b.id),"grubHub"===v&&(b.url="http://www.grubhub.com/restaurant/"+b.id),this.externalServices.push(b)}if(n.hasOwnProperty("conciergerecommendations")&&null!==n.conciergerecommendations&&n.conciergerecommendations.length>0)for(var x=0;x<n.conciergerecommendations.length;x++){var w=n.conciergerecommendations[x],S=new t;S.init(w),this.localistaRecommendations.push(S)}if(n.hasOwnProperty("recommenders"))for(var I=0;I<n.recommenders.length;I++){var _=n.recommenders[I],P={id:_.recommenderprofileid,imageUrl:_.imageurl,firstName:_.accountfname,lastName:_.accountlname,fullName:null,profileTypeId:_.recommenderprofiletypeid,profileName:_.recommenderprofiletypename,profileSalutation:_.recommenderprofilesalutation,description:_.description,reasons:[]};P.profileSalutation=P.profileSalutation.replace("Our ",""),null!==P.firstName&&null!==P.lastName&&(P.fullName=P.firstName+" "+P.lastName),_.hasOwnProperty("reasonone")&&null!==_.reasonone&&P.reasons.push(_.reasonone),_.hasOwnProperty("reasontwo")&&null!==_.reasontwo&&P.reasons.push(_.reasontwo),this.recommenders.push(P)}if(n.hasOwnProperty("conciergeprofile")&&null!==n.conciergeprofile){var A=r.createLocalistaAdaptor();A.init(n.conciergeprofile),this.localista=A}},{fromJSON:function(r){if("undefined"!=typeof r){var n=r;if(e.isArray(r)){if(0===r.length)return[];for(var o=[],a=0;a<r.length;a++)if(n=r[a],e.isArray(n)&&(n=n[0]),2==n.objecttypeid){var i=new t;i.init(n),o.push(i)}return o}if("objecttypeid"in n&&2==n.objecttypeid||"histreeid"in n){var l=new t;return l.init(n),l}}},toJSON:function(e){},createRecommendationAdaptor:function(){return new t}}}angular.module("ourstay").factory("RecommendationTransformerService",e),e.$inject=["_","LocalistaTransformerService"]}(),function(){"use strict";function e(){function e(e){n.push(e)}function r(e){var r=n.indexOf(e);r>-1&&n.splice(r,1)}function t(e){for(var r=0;r<n.length;r++)n[r](e)}var n=[];return{subscribe:e,unsubscribe:r,publish:t}}angular.module("ourstay").factory("PubSubService",e),e.$inject=["$location","ConfigService"]}(),function(){"use strict";function e(e,r,t){function n(){angular.forEach(o,function(e){e(i)})}var o=[],a=null,i=[],l=null;return{activeProperty:function(){return l},getCategories:function(){return i},getCategoryById:function(e){for(var r in i)if(i[r].id===parseInt(e))return i[r];return null},addListener:function(e){var r=o.push(e);return r-1},removeListener:function(e){e in o&&delete o[e]},loadData:function(e){a!==e?(a=e,r.getPropertyById(a).then(function(e){l=e,t.setPropertyLocation(e.lat,e.lng),r.fetchCategoriesByPropertyId(a).then(function(e){i=e,n()})})):n()}}}angular.module("ourstay").factory("PropertyService",e),e.$inject=["_","APIService","GeoLocationService"]}(),function(){"use strict";function e(){function e(){this.id=null,this.defaultBranchId=null,this.planId=null,this.shortenedSlug=null,this.slug=null,this.name=null,this.logoUrl=null,this.imageUrl=null,this.lat=null,this.lng=null,this.street1=null,this.street2=null,this.street3=null,this.city=null,this.state=null,this.postalCode=null,this.country=null,this.phone=null,this.propertyCode=null,this.primaryName=null,this.secondaryName=null}return e.prototype.init=function(e){"communitreeguid"in e&&(this.id=parseInt(e.communitreeguid)),"communitreedefaultbranch"in e&&(this.defaultBranchId=parseInt(e.communitreedefaultbranch)),"communitreeplan"in e&&(this.planId=parseInt(e.communitreeplan)),"productshortname"in e&&(this.shortenedSlug=e.productshortname),"productlongname"in e&&(this.slug=e.productlongname),"productname"in e&&(this.name=e.productname),"logourl"in e&&(this.logoUrl=e.logourl),"latitude"in e&&(this.lat=e.latitude),"longitude"in e&&(this.lng=e.longitude),"physicaladdressstreet1"in e&&(this.street1=e.physicaladdressstreet1),"physicaladdressstreet2"in e&&(this.street2=e.physicaladdressstreet2),"physicaladdressstreet3"in e&&(this.street3=e.physicaladdressstreet3),"physicaladdresscity"in e&&(this.city=e.physicaladdresscity),"physicaladdressstate"in e&&(this.state=e.physicaladdressstate),"physicaladdresspostalcode"in e&&(this.postalCode=e.physicaladdresspostalcode),"physicaladdresscountry"in e&&(this.country=e.physicaladdresscountry),"physicaladdressphone"in e&&(this.phone=e.physicaladdressphone),"imageurl"in e&&(this.imageUrl=e.imageurl),"propertycode"in e&&(this.propertyCode=e.propertycode),"propertyfname"in e.communitreeproperties&&(this.primaryName=e.communitreeproperties.propertyfname),"propertylname"in e.communitreeproperties&&(this.secondaryName=e.communitreeproperties.propertylname)},{fromJSON:function(r){if(_.isArray(r)){if(0===r.length)return[];var t=[];for(var n in r){var o=r[n];_.isArray(o)&&(o=o[0]);var a=new e;a.init(o),t.push(a)}return t}var a=new e;return a.init(r),a},createPropertyAdaptor:function(){return new e},toJSON:function(e){}}}angular.module("ourstay").factory("PropertyTransformerService",e)}(),function(){"use strict";function e(e,r){var t={WELCOME:"welcome",EXPLORE:"explore",RECOMMENDATION_DETAIL:"recommendation_detail",RECOMMENDATION_LIST:"recommendation_list",SEARCH:"search",NEARBY:"nearby",HERE_FOR_A_DAY:"here_for_a_day",FEATURED_CONCIERGE:"featured_concierge"},n={welcome:"/",explore:"/property/##propertyId##/explore/",recommendation_list:"/property/##propertyId##/recommendations/",search:"/property/##propertyId##/search/",recommendation_detail:"/property/##propertyId##/recommendations/##recommendationId##/",nearby:"/property/##propertyId##/nearby/",here_for_a_day:"/property/##propertyId##/here-for-a-day/",featured_concierge:"/property/##propertyId##/featured-concierge/##localistaId##/"},o=function(r,t,o){if(r in n){var a=n[r];for(var i in t)a=a.replace("##"+i+"##",t[i]);"undefined"==typeof o?e.path(a).search({}):e.path(a).search(o)}};return{goTo:o,sections:t}}angular.module("ourstay").factory("NavService",e),e.$inject=["$location","ConfigService"]}(),function(){"use strict";function e(e){function r(){this.id=null,this.propertyId=null,this.firstName=null,this.lastName=null,this.expertises=null,this.primaryImageUrl=null,this.mediaLinks=[],this.getFullName=function(){return this.firstName+" "+this.lastName}}return r.prototype.toJSON=function(){return{}},r.prototype.init=function(e){if(e.hasOwnProperty("conciergeprofileid")&&(this.id=parseInt(e.conciergeprofileid)),e.hasOwnProperty("communitree")&&(this.propertyId=parseInt(e.communitree)),e.hasOwnProperty("thumbnail")&&(this.primaryImageUrl=e.thumbnail),e.hasOwnProperty("fname")&&(this.firstName=e.fname),e.hasOwnProperty("lname")&&(this.lastName=e.lname),e.hasOwnProperty("expertises")&&(this.expertises=e.expertises),e.hasOwnProperty("chefconcierge")&&(e.chefconcierge?this.conciergeTitle="Chef Concierge":this.conciergeTitle="Concierge"),e.hasOwnProperty("conciergeprofileid")&&(this.conciergeProfileId=e.conciergeprofileid),e.hasOwnProperty("socialmedias")&&null!==e.socialmedias)for(var r=0;r<e.socialmedias.length;r++){var t=null;5===parseInt(e.socialmedias[r].smtype)&&(t={type:"instagram",url:e.socialmedias[r].smexternalid}),2===parseInt(e.socialmedias[r].smtype)&&(t={type:"twitter",url:e.socialmedias[r].smexternalid}),1===parseInt(e.socialmedias[r].smtype)&&(t={type:"facebook",url:e.socialmedias[r].smexternalid}),null!==t&&this.mediaLinks.push(t)}},{fromJSON:function(t){if("undefined"!=typeof t){var n=t;if(e.isArray(t)){if(0===t.length)return[];for(var o=[],a=0;a<t.length;a++){n=t[a],e.isArray(n)&&(n=n[0]);var i=new r;i.init(n),o.push(i)}return o}var l=new r;return l.init(n),l}},toJSON:function(e){},createLocalistaAdaptor:function(){return new r}}}angular.module("ourstay").factory("LocalistaTransformerService",e),e.$inject=["_"]}(),function(){"use strict";function e(e,r,t){function n(){this.localista=null,this.slots=[]}return n.prototype.toJSON=function(){return{}},n.prototype.init=function(e){if(this.localista=t.fromJSON(e),e.hasOwnProperty("conciergeslots")&&null!==e.conciergeslots){for(var n=angular.copy(e.conciergeslots),o=0;o<n.length;o++)n[o].hasOwnProperty("listing")&&(n[o].recommendation=r.fromJSON(n[o].listing),delete n[o].listing),this.slots.push(n[o]);delete this.localista.slots}},{fromJSON:function(r){if("undefined"!=typeof r){var t=r;if(e.isArray(r)){if(0===r.length)return[];for(var o=[],a=0;a<r.length;a++){t=r[a],e.isArray(t)&&(t=t[0]);var i=new n;i.init(t),o.push(i)}return o}var l=new n;return l.init(t),l}},toJSON:function(e){},createLocalistaProfileAdaptor:function(){return new n}}}angular.module("ourstay").factory("LocalistaProfileTransformerService",e),e.$inject=["_","RecommendationTransformerService","LocalistaTransformerService"]}(),function(){"use strict";function e(e,r){function t(){return null===d&&f>=p}function n(t,n,o,i){function c(e,r){s.resolve(l.init(e,o,i))}var s=r.defer();null===t&&s.reject("No start point provided"),"driving"!==o&&"walking"!==o&&s.reject("Not a viable mode");var d="driving"===o?google.maps.TravelMode.DRIVING:google.maps.TravelMode.WALKING,u=a(t),m=e.map(n,a),p=new google.maps.DistanceMatrixService;return p.getDistanceMatrix({origins:[u],destinations:m,travelMode:d},c),s.promise}function o(){if(!(null===m||e.isUndefined(m.lat)||e.isUndefined(m.lat)||null===d||e.isUndefined(d.lat)||e.isUndefined(d.lat))){var r=d.lat+","+d.lng,t=m.lat+","+m.lng;n(r,[t],"driving").then(function(r){e.isEmpty(r)||(p=r[0].distance)})}}function a(r){if(e.isString(r)){var t=r.split(",");return new google.maps.LatLng(t[0],t[1])}}function i(){angular.forEach(u,function(e){null!==d&&t()?e(d):null===d||t()||null===m?null==d&&null!==m&&e(m):e(m)})}function l(){this.mode=null,this.address=null,this.duration=null,this.durationLabel=null,this.distance=null,this.distanceLabel=null,this.startPointLabel=null}var c,s=!1,d=null,u=[],m=null,p=null,f=5e4;return l.init=function(e,r,t){var n=[];if(e.hasOwnProperty("rows")&&void 0!==e.rows[0]&&e.rows[0].hasOwnProperty("elements"))for(var o=e.rows[0].elements,a=0;a<o.length;a++){var i=new l;e.hasOwnProperty("destinationAddresses")&&(i.address=e.destinationAddresses[a]),"OK"===o[a].status&&(i.mode=r,i.startPointLabel=t,i.duration=o[a].duration.value,i.distance=o[a].distance.value,i.durationLabel=o[a].duration.text,i.distanceLabel=o[a].distance.text),n.push(i)}return n},{setPropertyLocation:function(e,r){null!==m&&m.lat===e&&m.lng===r||(m={},m.lat=e,m.lng=r,o())},addListener:function(e){var r=u.push(e);return r-1},removeListener:function(e){e in u&&delete u[e]},isLocationTrackingActive:function(){return s===!0},enableLocationServices:function(){"geolocation"in navigator&&s!==!0&&(c=navigator.geolocation.watchPosition(function(e){s=!0,d={lat:e.coords.latitude.toString(),lng:e.coords.longitude.toString()},o(),i()},function(e){s=!1,i()}))},getCurrentPosition:function(){return null!==d&&t()?d:null===d||t()||null===m?null===d&&null!==m?m:null:m},forceNotify:function(){i()},calculateDurationToPoint:function(e,r){var t,o=null,a=null,i=null;null!==d?(a=d.lat+","+d.lng,f>=p?o=a:null!==m&&(i=m.lat+","+m.lng,o=i)):null!==m&&(i=m.lat+","+m.lng,o=i);var l=o==i?"hotel":"here";return t=n(o,e,r,l)},disableLocationServices:function(){navigator.geolocation.clearWatch(c),s=!1}}}angular.module("ourstay").factory("GeoLocationService",e),e.$inject=["_","$q"]}(),function(){"use strict";function e(e){function r(){this.id=null,this.featuredType=null,this.name=null,this.position=null,this.imageUrl=null,this.recommendations=[],this.url=null,this.lat=null,this.lng=null,this.walkingMinutesFromHotel=null,this.drivingMinutesFromHotel=null,this.images=[],this.featuredImages=[]}return r.prototype.init=function(e){if("objectid"in e&&(this.id=e.objectid),"objectname"in e&&(this.name=e.objectname),"featuredposition"in e&&(this.position=e.featuredposition),"imageurl"in e&&(this.imageUrl=e.imageurl),21===e.objecttypeid){this.featuredType="category";for(var t in e.moodview){var n=e.moodview[t],o=new r;o.init(n),this.recommendations.push(o)}}if(2===e.objecttypeid){if(this.featuredType="recommendation","latitude"in e&&(this.lat=e.latitude),"longitude"in e&&(this.lng=e.longitude),"objecturl"in e&&(this.url=e.objecturl),"objecturl"in e&&(this.url=e.objecturl),"walkingminutesfromhotel"in e&&(this.walkingMinutesFromHotel=e.walkingminutesfromhotel),"drivingminutesfromhotel"in e&&(this.drivingMinutesFromHotel=e.drivingminutesfromhotel),"recommendationassets"in e)for(var a in e.recommendationassets){var i=e.recommendationassets[a];this.images.push(i)}if("fsrecommendationassets"in e)for(var l in e.fsrecommendationassets){var c=e.fsrecommendationassets[l];this.featuredImages.push(c)}}},{createFeaturedAdaptor:function(){return new r},fromJSON:function(t){if(e.isArray(t)){if(0===t.length)return[];for(var n=[],o=0;o<t.length;o++){var a=t[o];e.isArray(a)&&(a=a[0]);var i=new r;i.init(a),n.push(i)}return n}var l=new r;return l.init(a),l}}}angular.module("ourstay").factory("FeaturedTransformerService",e),e.$inject=["_"]}(),function(){"use strict";function e(){var e=288,r=286,t={API_BASE_URL:"http://fsd.ourstay.com",SITE_NAME:"Four Seasons",SITE_DESCRIPTION:"",GOOGLE_MAPS_API_KEY:"AIzaSyB7kLt-ZwwJ-0bLjeJLbuxqkoidWTdWTZI",CHICAGO_ID:e,MIAMI_ID:r,MAX_WALKING_MINUTES:30,PROPERTY_TO_LOCALISTA_MAP:{}};return t.PROPERTY_TO_LOCALISTA_MAP[r]=908,t.PROPERTY_TO_LOCALISTA_MAP[e]=907,t}angular.module("ourstay").factory("ConfigService",e)}(),function(){"use strict";function e(e,r){function t(){this.id=null,this.imageType=null,this.name=null,this.description=null,this.imageUrl=null,this.retinaImageUrl=null,this.recommendations=[]}return t.prototype.init=function(e){"moodid"in e&&(this.id=e.moodid),"moodname"in e&&(this.name=e.moodname),"mooddescription"in e&&(this.description=e.mooddescription),"assetnonretina"in e&&(this.imageUrl=e.assetnonretina),"assetretina"in e&&(this.retinaImageUrl=e.assetretina)},{fromJSON:function(r){var n;if(e.isArray(r)){if(0===r.length)return[];var o=[];for(var a in r){var i=new t;i.init(r[a]),o.push(i)}return o}return n=new t,n.init(r),n},createCategoryAdaptor:function(){return new t},toJSON:function(e){}}}angular.module("ourstay").factory("CategoryTransformerService",e),e.$inject=["_","RecommendationTransformerService"]}(),function(){"use strict";function e(e,r,t,n,o,a,i,l){function c(e){var r=angular.fromJson(e),t=!1;r.hasOwnProperty("r")&&r.r.hasOwnProperty("nextpage")&&null!==r.r.nextpage&&(t=!0);var o=r.r.data;r.r.data.hasOwnProperty("data")&&(o=r.r.data.data);var a=n.fromJSON(o);return{hasMore:t,results:a}}return{search:function(o,a){var i=t.defer();return e({method:"JSONP",url:r.API_BASE_URL+"/xhr/mobilesearch/communitree?callback=JSON_CALLBACK&communitreeid="+o+"&q="+a+"&devicetypeid=2",transformResponse:function(e){var r=angular.fromJson(e).r.data;return n.fromJSON(r)}}).success(function(e){i.resolve(e)}),i.promise},nearby:function(n,o,a,i){i="undefined"==typeof i?1:i;var l=t.defer();return e({method:"JSONP",url:r.API_BASE_URL+"/xhr/nearbysearch/communitree?callback=JSON_CALLBACK&communitreeid="+n+"&lat="+o+"&long="+a+"&page="+i,transformResponse:function(e){return c(e)}}).success(function(e){l.resolve(e)}),l.promise},getPropertyById:function(n){var o=t.defer();return e({method:"JSONP",url:r.API_BASE_URL+"/xhr/communitree/getpropertyinformobile?callback=JSON_CALLBACK&devicetypeid=1&communitreeid="+n,transformResponse:function(e){var r=angular.fromJson(e);if(r.hasOwnProperty("r")){var t=r.r;return a.fromJSON(t)}o.reject("No object found")}}).success(function(e){o.resolve(e)}),o.promise},fetchRecommendationsByCategoryId:function(n,o,a){a="undefined"==typeof a?1:a;var i=t.defer();return e({method:"JSONP",url:r.API_BASE_URL+"/xhr/mood/recsandconciergespaginated?callback=JSON_CALLBACK&communitreeid="+n+"&moodid="+o+"&devicetypeid=2&page="+a,transformResponse:function(e){return c(e)}}).success(function(e){i.resolve(e)}),i.promise},fetchFeaturedByPropertyId:function(o){var a=t.defer();return e({method:"JSONP",url:r.API_BASE_URL+"/xhr/communitree/OSfeatured?callback=JSON_CALLBACK&multireturn=1&communitreeid="+o,transformResponse:function(e){var r=angular.fromJson(e).r;return n.fromJSON(r)}}).success(function(e){a.resolve(e)}),a.promise},fetchCategoriesByPropertyId:function(n){var o=t.defer();return e({method:"JSONP",url:r.API_BASE_URL+"/xhr/mood/moodsforwebcommunitree?callback=JSON_CALLBACK&communitreeid="+n,transformResponse:function(e){var r=e.r.data;return i.fromJSON(r)}}).success(function(e){o.resolve(e)}),o.promise},fetchLocalistaRecommendations:function(n,o,a){a="undefined"==typeof a?1:a;var i=t.defer();return e({method:"JSONP",url:r.API_BASE_URL+"/xhr/concierge/conciergerecspaginated?callback=JSON_CALLBACK&conciergeid="+o+"&page="+a+"&multireturn=1&communitreeid="+n,transformResponse:function(e){return c(e)}}).success(function(e){i.resolve(e)}),i.promise},fetchPropertiesByBrand:function(n){var o=t.defer();return e({method:"JSONP",url:r.API_BASE_URL+"/xhr/communitree/getPropertiesByBrand?forsearch=1&brandid="+n,params:{format:"jsonp",callback:"JSON_CALLBACK"}}).success(function(e){o.resolve(e.r.data)}),o.promise},getLocalistaForPropertyId:function(n,o){var a=t.defer();return e({method:"JSONP",url:r.API_BASE_URL+"/xhr/concierge/get?callback=JSON_CALLBACK&conciergeprofileid="+o,transformResponse:function(e){var r=angular.fromJson(e).r;return l.fromJSON(r)}}).success(function(e){a.resolve(e)}),a.promise},getLocalistaSummaryForPropertyId:function(n){var o=t.defer();return e({method:"JSONP",url:r.API_BASE_URL+"/xhr/concierge/getforcommunitree?callback=JSON_CALLBACK&communitreeid="+n,transformResponse:function(e){var r=angular.fromJson(e).r[0];return l.fromJSON(r)}}).success(function(e){o.resolve(e)}),o.promise},getRecommendationById:function(o,a){var i=t.defer();return e({method:"JSONP",url:r.API_BASE_URL+"/xhr/histree/getdetailedrecommendationinfo?callback=JSON_CALLBACK&multireturn=1&communitreeid="+o+"&histreeid="+a,transformResponse:function(e){var r=angular.fromJson(e).r[0];return n.fromJSON(r)}}).success(function(e){i.resolve(e)}),i.promise}}}angular.module("ourstay").factory("APIService",e),e.$inject=["$http","ConfigService","$q","RecommendationTransformerService","FeaturedTransformerService","PropertyTransformerService","CategoryTransformerService","LocalistaProfileTransformerService"]}(),function(){"use strict";function e(e,r,t,n,o,a,i,l,c,s,d,u){function m(){s.cancel(_),_=s(function(){I=!1},2e3)}function p(){if(x.hasMoreAvailable||"nearby"===r)if(I||x.isLoading);else{switch(I=!0,r){case"nearby":null!==S&&f(x.propertyId,S.lat,S.lng,x.currentPage+1);break;case"featured-explorer":y(x.propertyId,null,x.currentPage+1,x.localistaId);break;case"here-for-a-day":break;case"search":break;default:y(x.propertyId,x.categoryId,x.currentPage+1)}m()}}function f(e,r,t,n){x.isLoading=!0,o.nearby(e,r,t,n).then(function(e){e.results.length<1||(x.currentPage=n,x.hasMoreAvailable=e.hasMore,h(e.results)),x.isLoading=!1})}function g(e,r,o,a){var i=t.map(e,function(e){return null===e.lat||null===e.lng?null:e.lat+","+e.lng});l.calculateDurationToPoint(i,a).then(function(e){for(var t=0;t<e.length;t++)x.durations[a][r+t]=e[t];for(var o=0;o<x.recommendations.length;o++){var i=x.recommendations[o],l=x.durations[a][o];i.startPointLabel=l.startPointLabel,i.maxWalkingMinutes=n.MAX_WALKING_MINUTES,"walking"===a?(i.walkingMinutesValue=l.duration/60,i.walkingMinutes=l.durationLabel):"driving"===a&&(i.drivingMinutesValue=l.duration/60,i.drivingMinutes=l.durationLabel)}})}function h(e){var r=null,t=null;x.firstLoad&&(x.firstLoad=!1);for(var n=0;n<e.length;n++){var o=x.recommendations.push(e[n]),a=o-1;null===r&&(r=a),t=a}g(e,r,t,"driving"),g(e,r,t,"walking")}function y(e,r,t,n){n="undefined"==typeof n||null===n?null:n,x.isLoading=!0;var a=function(e){e.results.length<1||(x.currentPage=t,x.hasMoreAvailable=e.hasMore,h(e.results)),x.isLoading=!1};null!==n?o.fetchLocalistaRecommendations(e,n,t).then(a):o.fetchRecommendationsByCategoryId(e,r,t).then(a)}function v(){null===S&&(null!==l.getCurrentPosition()?(S=l.getCurrentPosition(),l.removeListener(w),f(x.propertyId,S.lat,S.lng,x.currentPage)):s(function(){v()},1500))}function b(){function e(e){e&&(x.pageTitle=e.name,x.pageDescription=e.description,d.cancel(P))}if(x.propertyId=i.propertyId,x.localistaId=i.localistaId,x.categoryId=a.search().category,x.title=a.search().title,"featured-explorer"===r){y(x.propertyId,null,x.currentPage,x.localistaId),x.localistaPage=!0,x.title=null;var s=function(e){x.title=e.localista.firstName+" Featured Recommendations"};o.getLocalistaForPropertyId(x.propertyId,x.localistaId).then(s)}else if("search"===r){var u=a.search().query;x.title="Search Results: "+u,x.searchPage=!0,o.search(x.propertyId,u).then(function(e){h(e),x.recommendations.length>0&&(x.searchResults=!0),x.isLoading=!1})}else"here-for-a-day"===r?(x.isLoading=!0,x.searchPage=!1,"undefined"==typeof x.localistaId&&(x.localistaId=n.PROPERTY_TO_LOCALISTA_MAP[x.propertyId]),o.getLocalistaSummaryForPropertyId(x.propertyId).then(function(e){x.localista=e.localista,o.fetchFeaturedByPropertyId(x.propertyId).then(function(e){x.isLocalistaVisible=!0,x.isLoading=!1,h(e)})})):"nearby"===r?(x.searchPage=!1,null===w&&(w=l.addListener(function(e){l.removeListener(w),S=e,f(x.propertyId,S.lat,S.lng,x.currentPage)})),l.enableLocationServices(),v()):y(x.propertyId,x.categoryId,x.currentPage);e(c.getCategoryById(x.categoryId)),P=d(function(){var r=c.getCategoryById(x.categoryId);e(r)},1e3),o.getPropertyById(x.propertyId).then(function(e){x.property=e,x.propertyUrl={}}),x.getPropertyLink=function(){if(t.isEmpty(x.property))return"http://www.fourseasons.com/";var e=x.property.shortenedSlug;return"http://www.fourseasons.com/"+e}}var x=this,w=null,S=null,I=!1,_=null,P=null;x.firstLoad=!0,x.hasMoreAvailable=!0,x.isLocalistaVisible=!1,x.recommendations=[],x.propertyId=null,x.categoryId=null,x.isLoading=!0,x.searchPage=!1,x.localista=null,x.searchResults=!1,x.currentCategory=null,x.propertyServiceWatchId=null,x.durations={walking:[],driving:[]},x.currentPage=1,x.getNext=p,e.$on("$destroy",function(e){w&&(l.removeListener(w),w=null),null!==x.propertyServiceWatchId&&c.removeListener(x.propertyServiceWatchId),P&&d.cancel(P)}),x.goToLocalista=function(e){u.goTo(u.sections.FEATURED_CONCIERGE,{propertyId:x.propertyId,localistaId:e})},x.navigateToExplore=function(){u.goTo(u.sections.EXPLORE,{propertyId:x.propertyId})};var A=c.activeProperty();null!==A?null!==A.id&&"undefined"!=typeof A.id&&b():x.propertyServiceWatchId=c.addListener(function(e){c.removeListener(x.propertyServiceWatchId),b()})}angular.module("ourstay").controller("RecommendationController",e),e.$inject=["$scope","mode","_","ConfigService","APIService","$location","$routeParams","GeoLocationService","PropertyService","$timeout","$interval","NavService"]}(),function(){"use strict";function e(){function e(e,r,t){}var r={link:e,templateUrl:"todo",restrict:"EA"};return r}angular.module("ourstay").directive("recommendationGrid",e)}(),function(){"use strict";function e(e,r,t,n,o,a,i,l,c,s,d){function u(e){var r=[f.recommendation.lat+","+f.recommendation.lng];c.calculateDurationToPoint(r,e).then(function(r){f.recommendation.startPointLabel=r[0].startPointLabel,f.recommendation.maxWalkingMinutes=t.MAX_WALKING_MINUTES,"driving"===e?(f.recommendation.drivingMinutesValue=r[0].duration/60,f.recommendation.drivingMinutes=r[0].durationLabel):(f.recommendation.walkingMinutesValue=r[0].duration/60,f.recommendation.walkingMinutes=r[0].durationLabel)})}function m(){f.recommendation&&f.recommendation.relatedCategories.length>0&&l.categories&&0!==l.categories.length&&(f.fullyLoadedCategories=angular.copy(l.categories),l.removeListener(g))}function p(){f.propertyId=i.propertyId,f.recommendationId=i.recommendationId,f.currentDay=(new Date).getDay()+1,288==f.propertyId?f.exploreUrl="http://guide.hyattcentric.com/TheLoopChicago":f.exploreUrl="http://guide.hyattcentric.com/SouthBeachMiami",f.allHours=!1,f.toggleAllHours=function(){f.allHours=!f.allHours},g=l.addListener(function(e){f.onPropertyCategoriesRetrieved(e)}),f.isLoading=!0,n.getRecommendationById(f.propertyId,f.recommendationId).then(function(e){if(141==e.meetTheTypeId&&(f.localistaUrl="/property/"+f.propertyId+"/featured-explorer/"+t.PROPERTY_TO_LOCALISTA_MAP[f.propertyId]+"/"),"undefined"!=typeof e){f.isLoading=!1,f.recommendation=e;var r={action:"metaTagsChange",data:{title:f.recommendation.name,description:f.recommendation.shortDescription,url:o.absUrl(),imageUrl:f.recommendation.primaryImageUrl}};s.publish(r),3==f.recommendation.localistaRecommendations.length&&(f.recommendation.localistaRecommendations=f.recommendation.localistaRecommendations.slice(0,2)),f.recommendation.location=e.lat+","+e.lng,f.images=[e.images.map(function(e){return e.thumb})],u("driving"),u("walking"),m()}})}var f=this,g=null;f.propertyId=null,f.recommendationId=null,f.recommendation=null,f.fullyLoadedCategories=[],f.isLoading=!1,f.days={MON:2,TUE:3,WED:4,THU:5,FRI:6,SAT:7,SUN:1},f.dayStringMap={},
f.dayStringMap[f.days.MON]="Mon",f.dayStringMap[f.days.TUE]="Tues",f.dayStringMap[f.days.WED]="Wed",f.dayStringMap[f.days.THU]="Thurs",f.dayStringMap[f.days.FRI]="Fri",f.dayStringMap[f.days.SAT]="Sat",f.dayStringMap[f.days.SUN]="Sun",f.slickConfig={method:{},dots:!0,speed:300,lazyLoad:"ondemand",draggable:!1,arrows:!0,slidesToShow:1,touchMove:!0,infinite:!0},e.modalShown=!1,e.toggleModal=function(){e.modalShown=!e.modalShown},e.$on("$destroy",function(e){g&&l.removeListener(g)}),p(),f.getCallIcon=function(){return"/static/images/locations/"+f.propertyId+"/call.png"},f.getCallHoverIcon=function(){return"/static/images/locations/"+f.propertyId+"/call_hover.png"},f.getShareIcon=function(){return"/static/images/locations/"+f.propertyId+"/share.png"},f.getShareHoverIcon=function(){return"/static/images/locations/"+f.propertyId+"/share_hover.png"},f.getWebsiteIcon=function(){return"/static/images/locations/"+f.propertyId+"/website.png"},f.getWebsiteHoverIcon=function(){return"/static/images/locations/"+f.propertyId+"/website_hover.png"},f.getDirectionsIcon=function(){return"/static/images/locations/"+f.propertyId+"/directions.png"},f.getDirectionsHoverIcon=function(){return"/static/images/locations/"+f.propertyId+"/directions_hover.png"},f.getDirectionsLink=function(){if(f.recommendation){var e=f.recommendation.street1+" "+f.recommendation.city+", "+f.recommendation.state+" "+f.recommendation.postalCode;return"https://www.google.com/maps/place/"+encodeURIComponent(e.trim())}return"https://maps.google.com"},f.getDesc=function(){return f.recommendation.description[0]||"A great spot"},f.getUrl=function(){return o.absUrl()},f.getHoursString=function(e,r){for(var t,n,o=null,a=0;a<f.recommendation.operatingHours.length;a++)f.recommendation.operatingHours[a].dayOfWeek===e&&(o=f.recommendation.operatingHours[a]);return null===o?"":"day"!==r&&"undefined"!=typeof r||!o.closed?o.closed?"":("day"===r||"undefined"==typeof r?(t=d("date")(o.openTimeDay,"h:mma"),n=d("date")(o.closeTimeDay,"h:mma")):(t=d("date")(o.openTimeNight,"h:mma"),n=d("date")(o.closeTimeNight,"h:mma")),null!==t&&null!==n?t+" - "+n:""):"closed"},f.hasOperatingHours=function(){if(null===f.recommendation||"undefined"==typeof f.recommendation)return!1;for(var e=!0,r=1,t=0;t<f.recommendation.operatingHours.length;t++){var n=f.recommendation.operatingHours[t];null===n.openTimeDay&&null===n.closeTimeDay&&null===n.openTimeNight&&null===n.closeTimeNight&&n.closed===!1&&(r+=1)}return r>=7&&(e=!1),e},f.isOpenOn=function(e){if(null===f.recommendation||"undefined"==typeof f.recommendation)return!1;for(var r=0;r<f.recommendation.operatingHours.length;r++)if(f.recommendation.operatingHours[r].dayOfWeek===e)return!0;return!1},f.gotoLocalista=function(){o.hash("localista"),a()},f.onPropertyCategoriesRetrieved=function(e){f.fullyLoadedCategories=e,l.removeListener(g)}}angular.module("ourstay").controller("RecommendationDetailController",e),e.$inject=["$scope","_","ConfigService","APIService","$location","$anchorScroll","$routeParams","PropertyService","GeoLocationService","PubSubService","$filter"]}(),function(){"use strict";function e(e,r,t){var n=["$scope",function(r){function n(){PointerEventsPolyfill.initialize({})}r.hasFirstImageLoaded=!1,r.slickConfig={arrows:!Modernizr.touch,draggable:!1,infinite:!0,lazyLoad:"ondemand",speed:300,slidesToShow:1,touchMove:!0},r.onImageLoad=function(e){0!==e||r.hasFirstImageLoaded||t(function(){r.hasFirstImageLoaded=!0},500*e)},r.loadRec=function(t){e.goTo(e.sections.RECOMMENDATION_DETAIL,{propertyId:r.propertyId,recommendationId:r.recommendation.id})},n()}];return{scope:{propertyId:"=propertyId",recommendation:"=recommendation"},templateUrl:"/templates/recommendation/recommendation-card.html",controller:n}}angular.module("ourstay").directive("recommendationCard",e),e.$inject=["NavService","PropertyService","$timeout"]}(),function(){"use strict";function e(e,r){var t=["$scope",function(e){e.slickConfig={arrows:!Modernizr.touch,draggable:!1,infinite:!0,speed:300,slidesToShow:1,touchMove:!0}}];return{scope:{propertyId:"=",slot:"=",cardIndex:"="},templateUrl:"/templates/recommendation/perfect-card.html",controller:t}}angular.module("ourstay").directive("perfectCard",e),e.$inject=["NavService","PropertyService"]}(),function(){"use strict";function e(e,r,t,n){function o(){a.propertyId=n.propertyId,a.localistaId=n.localistaId,a.categoryId=t.search().category,a.title=t.search().title,a.moreRecosLink="/property/"+a.propertyId+"/featured-concierge-recommendations/"+a.localistaId+"/",r.getLocalistaForPropertyId(a.propertyId,a.localistaId).then(function(e){a.localista=e})}var a=this;a.localista=null,o()}angular.module("ourstay").controller("FeaturedRecommendationController",e),e.$inject=["ConfigService","APIService","$location","$routeParams"]}(),function(){"use strict";function e(e,r,t,n,o){function a(){i.propertyId=o.propertyId,i.localistaId=o.localistaId,i.moreRecosLink="/property/"+i.propertyId+"/featured-concierge/"+i.localistaId+"/recommendations/",i.isLoading=!0,r.getLocalistaForPropertyId(i.propertyId,i.localistaId).then(function(e){console.log("localista resp:",e),i.localista=e.localista,i.slots=e.slots,i.isLoading=!1})}var i=this;i.localista=null,i.recommendations=[],i.moreRecosLink=null,i.durations={walking:[],driving:[]},a()}angular.module("ourstay").controller("FeaturedExplorerController",e),e.$inject=["ConfigService","APIService","GeoLocationService","$location","$routeParams"]}(),function(){"use strict";function e(e){}function r(){}angular.module("ourstay").controller("CategoryController",e),e.$inject=["ConfigService"],r()}(),function(){"use strict";function e(e,r,t,n,o,a,i,l,c,s,d,u,m){function p(e,r){e.preventDefault(),l.goTo(l.sections.SEARCH,{propertyId:v.propertyId},{query:r})}function f(e){v.checked=!v.checked}function g(){v.checked=!1}function h(e){var r=["Home","Detail","Featured Explorer"];-1!=r.indexOf(e)?(v.showMobileLogo=!0,v.showMobileTitle=!1):(v.showMobileLogo=!1,v.showMobileTitle=!0)}function y(){r.$on("$routeChangeStart",function(e,r){g()}),r.$on("$routeChangeSuccess",function(r,t){e.scrollTo(0,0),v.propertyId=o.propertyId,v.searchQuery=null,g(),v.propertyId&&m.getLocalistaSummaryForPropertyId(v.propertyId).then(function(e){v.localista=e.localista,v.localistaId=v.localista.id}),"/"==location.pathname?(v.property={},v.property.name="Four Seasons"):m.getPropertyById(v.propertyId).then(function(e){v.property=e}),h(n.current.title),v.propertyId&&(v.sectionTitle=n.current.title,c.loadData(v.propertyId))}),i.addListener(function(e){v.onCurrentPositionUpdated(e)}),i.enableLocationServices()}var v=this;v.currentPosition=null,v.sectionTitle="OurStay",v.propertyId=void 0,v.search=p,v.toggleMenu=f,v.checked=!1,v.showMobileLogo=!0,v.showMobileTitle=!1,v.localistaId=null,y(),v.navigateToHome=function(){null!==v.propertyId&&"undefined"!=typeof v.propertyId?l.goTo(l.sections.EXPLORE,{propertyId:v.propertyId}):l.goTo(l.sections.WELCOME)},v.isPropertyIdSet=function(){return"undefined"!=typeof o.propertyId},v.getLogo=function(){return"home"},v.onCurrentPositionUpdated=function(e){r.$apply(function(){v.currentPosition=e})}}angular.module("ourstay").controller("NavController",e),e.$inject=["$window","$scope","ConfigService","$route","$routeParams","$location","GeoLocationService","NavService","PropertyService","ThemeService","PubSubService","$document","APIService"]}(),function(){"use strict";function e(e,r,t,n,o){function a(r){"setTheme"===r.action&&(e.logo=n.theme.logo)}function i(){e.$on("$routeChangeSuccess",function(e,r){n.theme.isSet||n.setTheme(t.propertyId)})}i(),o.subscribe(a)}angular.module("ourstay").controller("LayoutController",e),e.$inject=["$scope","$route","$routeParams","ThemeService","PubSubService"]}(),function(){"use strict";function e(e,r){function t(){e.$on("$routeChangeSuccess",function(e,t){n.propertyId=r.propertyId})}var n=this;n.propertyId=void 0,n.logo=void 0,t(),n.isPropertyIdSet=function(){return"undefined"!=typeof r.propertyId}}angular.module("ourstay").controller("FooterController",e),e.$inject=["$scope","$routeParams"]}(),function(){"use strict";function e(e,r,t,n){function o(e){"metaTagsChange"===e.action&&(e.data.hasOwnProperty("title")&&(i.metaTitle=e.data.title),e.data.hasOwnProperty("description")&&(i.metaDesc=e.data.description),e.data.hasOwnProperty("url")&&(i.metaUrl=e.data.url),e.data.hasOwnProperty("imageUrl")&&(i.metaImgUrl=e.data.imageUrl))}function a(){var e=detect.parse(navigator.userAgent);console.log(e.browser.family),"IE"===e.browser.family&&e.browser.major<10&&(i.isBrowserModern=!0),r.subscribe(o)}var i=this;i.metaUrl=t.absUrl(),i.metaTitle=n.SITE_NAME,i.metaDesc=n.SITE_DESCRIPTION,i.metaImgUrl=null,i.isBrowserModern=!0,a(),e.$on("$destroy",function(e){r.unsubscribe(o)})}angular.module("ourstay").controller("AppController",e),e.$inject=["$scope","PubSubService","$location","ConfigService"]}(),function(){"use strict";function e(e,r,t,n){function o(){var e=null;for(var r in d.categories)"meet our featured explorer"==d.categories[r].name.toLowerCase()&&(e=r);null!==e&&d.categories.splice(e,1)}function a(){var e=d.categories.length;d.localista&&e++,d.rowPattern=l[e];for(var r=d.rowPattern.length,t=0,n=0;r>n;n++)switch(d.rowPattern[n]){case"sinister":d.localista&&0==n?(d.sinister[0]=[null,d.categories[0],d.categories[1]],t=2):(d.sinister[n]=d.categories.slice(t,t+3),d.libra[n]=!1,d.dexter[n]=!1,t+=3);break;case"libra":d.sinister[n]=!1,d.libra[n]=d.categories.slice(t,t+2),d.dexter[n]=!1,t+=2;break;case"dexter":d.sinister[n]=!1,d.libra[n]=!1,d.dexter[n]=d.categories.slice(t,t+3),t+=3}}function i(){d.propertyId=t.propertyId,d.property={},"undefined"!=typeof d.propertyId&&"undefined"!==d.propertyId&&(r.getLocalistaSummaryForPropertyId(d.propertyId).then(function(e){d.localista=e.localista,r.fetchCategoriesByPropertyId(d.propertyId).then(function(e){d.isLoadingCategories=!1,d.categories=angular.copy(e),o(),a()})}),console.log("prop id from explore:",d.propertyId),r.getPropertyById(d.propertyId).then(function(e){d.property=e,console.log("property obj",d.property)}),d.getPropertyLink=function(){if(_.isEmpty(d.property))return"http://www.fourseasons.com/";var e=d.property.shortenedSlug;return"http://www.fourseasons.com/"+e})}var l=[];l[2]=["libra"],l[3]=["libra","libra"],l[4]=["libra","libra"],l[5]=["libra","libra"],l[6]=["libra","dexter"],l[7]=["libra","libra","libra"],l[8]=["libra","libra","dexter"],l[9]=["libra","dexter","libra"],l[10]=["libra","libra","libra","dexter"],l[11]=["libra","libra","dexter","sinister"],l[12]=["libra","libra","libra","dexter","libra"],l[13]=["libra","libra","dexter","libra","sinister"],l[14]=["libra","libra","libra","dexter","libra","libra"],l[15]=["libra","libra","libra","dexter","libra","sinister"],l[16]=["libra","libra","dexter","sinister","libra","dexter"],l[17]=["libra","libra","libra","dexter","libra","sinister","libra"],l[18]=["libra","libra","libra","dexter","sinister","libra","dexter"],l[19]=["libra","libra","libra","dexter","sinister","dexter","libra"],l[20]=["libra","libra","libra","dexter","sinister","libra","libra","dexter"],l[21]=["libra","libra","libra","dexter","sinister","libra","dexter","sinister"],l[22]=["libra","libra","libra","dexter","sinister","libra","libra","dexter","libra"],l[23]=["libra","libra","libra","dexter","sinister","libra","dexter","libra","sinister"];for(var c=["libra","libra","libra","dexter","sinister","libra","libra","dexter","libra","libra"],s=24;50>=s;s++)l[s]=c;var d=this;d.categories=[],d.rowPattern=[],d.isLoadingCategories=!0,d.propertyId=null,d.localista=null,d.sinister=[],d.libra=[],d.dexter=[],i(),d.goToLocalista=function(e){n.goTo(n.sections.FEATURED_CONCIERGE,{propertyId:d.propertyId,localistaId:e})}}angular.module("ourstay").controller("ExploreController",e),e.$inject=["ConfigService","APIService","$routeParams","NavService"]}(),function(){"use strict";function e(e,r,t,n,o){var a="/static/images/imageHolder.png",i=["$scope",function(e){function i(){PointerEventsPolyfill.initialize({}),"undefined"!=typeof e.localista?(e.currentTitle=e.localista.firstName,e.carouselImages=[e.localista.primaryImageUrl,a]):(e.currentTitle=angular.copy(e.category.name),e.carouselImages=[e.category.retinaImageUrl,a]),o.dispatchEvent(new CustomEvent("resize"))}e.hasFirstImageLoaded=!1,e.isTouch=Modernizr.touch,e.recsLoaded=!0,e.subTitle="Meet Our Featured Concierge",e.currentIndex=0,e.currentTitle=null,e.hasLoadBeenTriggered=!1,e.isLoading=!1,e.recommendations=[],e.slickConfig={method:{},speed:300,lazyLoad:"ondemand",fade:!0,infinite:!0,mobileFirst:!0,swipeToSlide:!0,arrows:!1,touchMove:!0,event:{init:function(e,r){},swipe:function(){e.triggerFirstLoad()},beforeChange:function(e,r){e.stopImmediatePropagation()},afterChange:function(r,t,n,o){e.currentIndex=n,e.redrawTitleFromRecIndex(e.currentIndex)}}},e.onRecsLoaded=function(){e.recsLoaded=!0,e.slickConfig.enabled=!0,n(function(){e.isLoading=!1},50)},e.onImageLoad=function(r){0!==r||e.hasFirstImageLoaded||n(function(){e.hasFirstImageLoaded=!0},50*r)},e.refreshCarouselImages=function(r){for(var t=e.carouselImages.shift(),n=0;n<r.length-1;n++)e.carouselImages.push(a);for(var o=0;o<r.length;o++){var i=r[o];e.carouselImages[o]=i.primaryImageUrl}e.carouselImages.push(t)},e.triggerFirstLoad=function(){e.hasLoadBeenTriggered||(e.slickConfig.enabled=!1,e.slickConfig.arrows=!Modernizr.touch,e.currentIndex=1,e.hasLoadBeenTriggered=!0,e.isLoading=!0,e.recsLoaded=!1,e.localista?t.fetchLocalistaRecommendations(e.propertyId,e.localista.id).then(function(r){r.results.length>0&&(e.recommendations=r.results,e.onRecsLoaded(),e.refreshCarouselImages(r.results))}):t.fetchRecommendationsByCategoryId(e.propertyId,e.category.id).then(function(r){r.results.length>0&&(e.recommendations=r.results,e.onRecsLoaded(),e.refreshCarouselImages(r.results)),e.onRecsLoaded()}))},e.redrawTitleFromRecIndex=function(r){r<e.recommendations.length?(e.currentTitle=e.recommendations[r].name,e.subTitle=null):e.localista?(e.subTitle="Meet Our Featured Concierge",e.currentTitle=e.localista.firstName+" "+e.localista.lastName):e.currentTitle=angular.copy(e.category.name)},e.unbindRecWatch=e.$watch("recommendations",function(r,t){r.length>0&&(e.redrawTitleFromRecIndex(parseInt(e.currentIndex-1)),e.unbindRecWatch())}),e.getTitleByIndex=function(r){return r<e.recommendations.length?e.recommendations[r].name:angular.copy(e.category.name)},e.click=function(t){if((0==t&&0==e.recommendations.length||e.recommendations.length>0&&t==e.recommendations.length)&&(e.localista?r.goTo(r.sections.FEATURED_EXPLORER,{propertyId:e.propertyId,localistaId:e.localista.id}):r.goTo(r.sections.RECOMMENDATION_LIST,{propertyId:e.propertyId},{category:e.category.id,title:e.category.name})),t>=0&&e.recommendations.length>0){var n=e.recommendations[t];r.goTo(r.sections.RECOMMENDATION_DETAIL,{recommendationId:n.id,propertyId:e.propertyId})}},i()}];return{scope:{propertyId:"=propertyId",localista:"=localista",category:"=category",gridId:"@gridId"},controller:i,replace:!0,templateUrl:"/templates/explore/explore-card.html"}}angular.module("ourstay").directive("exploreCard",e),e.$inject=["$location","NavService","APIService","$timeout","$window"]}(),function(){"use strict";function e(e){return{replace:!0,restrict:"EA",link:function(r,t,n){n.$observe("location",function(o){if(o){var a=window.devicePixelRatio>1||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches,i=a===!0?2:1,l=angular.element('<img ng-src="//maps.googleapis.com/maps/api/staticmap?markers='+o+"&zoom=14&scale="+i+"&size="+n.width+"x"+n.height+'" />'),c=e(l)(r);t.replaceWith(c)}})}}}angular.module("ourstay").directive("staticMapImg",e),e.$inject=["$compile"]}(),function(){"use strict";function e(){return{restrict:"A",scope:{callback:"&"},link:function(e,r,t){r.on("load",function(){e.callback()})}}}angular.module("ourstay").directive("smartImage",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{cats:"=",property:"=",localista:"=",rownumber:"="},templateUrl:"/templates/components/sinister.html",link:function(e,r,t){}}}angular.module("ourstay").directive("sinister",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{show:"="},replace:!0,transclude:!0,link:function(e,r,t){e.dialogStyle={},t.width&&(e.dialogStyle.width=t.width),t.height&&(e.dialogStyle.height=t.height),e.hideModal=function(){e.show=!1}},template:"<div class='ng-modal' ng-show='show'><div class='ng-modal-overlay' ng-click='hideModal()'></div><div class='ng-modal-dialog' ng-style='dialogStyle'><div class='ng-modal-close' ng-click='hideModal()'>X</div><div class='ng-modal-dialog-content' ng-transclude></div></div></div>"}}angular.module("ourstay").directive("shareModal",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{cats:"=",property:"="},templateUrl:"/templates/components/libra.html",link:function(e,r,t){}}}angular.module("ourstay").directive("libra",e)}(),function(){"use strict";function e(e,r){return{restrict:"A",link:function(t,n,o){n[0];angular.element(e).on("scroll",function(n){var a=angular.element(r)[0].documentElement,i=angular.element(e)[0];a.scrollHeight-i.innerHeight==i.pageYOffset&&t.$apply(o.infiniteScrollContainer)})}}}angular.module("ourstay").directive("infiniteScrollContainer",e),e.$inject=["$window","$document"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(r,t,n){t.bind("click",function(){e.history.back()})}}}angular.module("ourstay").directive("ourBackButton",e),e.$inject=["$window"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(e,r,t){r.addClass("ng-hide-remove"),r.on("load",function(){r.addClass("ng-hide-add")})}}}angular.module("ourstay").directive("fadeIn",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{cats:"=",property:"="},templateUrl:"/templates/components/dexter.html",link:function(e,r,t){}}}angular.module("ourstay").directive("dexter",e)}(),function(){function e(e,r){r=r||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,r.bubbles,r.cancelable,r.detail),t}e.prototype=window.CustomEvent.prototype,window.CustomEvent=e}(),function(){function e(e){if(this.options={selector:"*",mouseEvents:["click","dblclick","mousedown","mouseup"],usePolyfillIf:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;if(null!=e.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/)){var r=parseFloat(RegExp.$1);if(11>r)return!0}}return!1}},e){var r=this;$.each(e,function(e,t){r.options[e]=t})}this.options.usePolyfillIf()&&this.register_mouse_events()}e.initialize=function(r){return null==e.singleton&&(e.singleton=new e(r)),e.singleton},e.prototype.register_mouse_events=function(){$(document).on(this.options.mouseEvents.join(" "),this.options.selector,function(e){if("none"==$(this).css("pointer-events")){var r=$(this).css("display");$(this).css("display","none");var t=document.elementFromPoint(e.clientX,e.clientY);return r?$(this).css("display",r):$(this).css("display",""),e.target=t,$(t).trigger(e),!1}return!0})},window.PointerEventsPolyfill=e}(),window.Modernizr=function(e,r,t){function n(e){b.cssText=e}function o(e,r){return n(I.join(e+";")+(r||""))}function a(e,r){return typeof e===r}function i(e,r){return!!~(""+e).indexOf(r)}function l(e,r){for(var n in e){var o=e[n];if(!i(o,"-")&&b[o]!==t)return"pfx"==r?o:!0}return!1}function c(e,r,n){for(var o in e){var i=r[e[o]];if(i!==t)return n===!1?e[o]:a(i,"function")?i.bind(n||r):i}return!1}function s(e,r,t){var n=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+P.join(n+" ")+n).split(" ");return a(r,"string")||a(r,"undefined")?l(o,r):(o=(e+" "+A.join(n+" ")+n).split(" "),c(o,r,t))}function d(){f.input=function(t){for(var n=0,o=t.length;o>n;n++)L[t[n]]=!!(t[n]in x);return L.list&&(L.list=!(!r.createElement("datalist")||!e.HTMLDataListElement)),L}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),f.inputtypes=function(e){for(var n,o,a,i=0,l=e.length;l>i;i++)x.setAttribute("type",o=e[i]),n="text"!==x.type,n&&(x.value=w,x.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(o)&&x.style.WebkitAppearance!==t?(h.appendChild(x),a=r.defaultView,n=a.getComputedStyle&&"textfield"!==a.getComputedStyle(x,null).WebkitAppearance&&0!==x.offsetHeight,h.removeChild(x)):/^(search|tel)$/.test(o)||(n=/^(url|email)$/.test(o)?x.checkValidity&&x.checkValidity()===!1:x.value!=w)),O[e[i]]=!!n;return O}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var u,m,p="2.8.3",f={},g=!0,h=r.documentElement,y="modernizr",v=r.createElement(y),b=v.style,x=r.createElement("input"),w=":)",S={}.toString,I=" -webkit- -moz- -o- -ms- ".split(" "),_="Webkit Moz O ms",P=_.split(" "),A=_.toLowerCase().split(" "),C={svg:"http://www.w3.org/2000/svg"},T={},O={},L={},k=[],M=k.slice,N=function(e,t,n,o){var a,i,l,c,s=r.createElement("div"),d=r.body,u=d||r.createElement("body");if(parseInt(n,10))for(;n--;)l=r.createElement("div"),l.id=o?o[n]:y+(n+1),s.appendChild(l);return a=["&#173;",'<style id="s',y,'">',e,"</style>"].join(""),s.id=y,(d?s:u).innerHTML+=a,u.appendChild(s),d||(u.style.background="",u.style.overflow="hidden",c=h.style.overflow,h.style.overflow="hidden",h.appendChild(u)),i=t(s,e),d?s.parentNode.removeChild(s):(u.parentNode.removeChild(u),h.style.overflow=c),!!i},E=function(r){var t=e.matchMedia||e.msMatchMedia;if(t)return t(r)&&t(r).matches||!1;var n;return N("@media "+r+" { #"+y+" { position: absolute; } }",function(r){n="absolute"==(e.getComputedStyle?getComputedStyle(r,null):r.currentStyle).position}),n},$=function(){function e(e,o){o=o||r.createElement(n[e]||"div"),e="on"+e;var i=e in o;return i||(o.setAttribute||(o=r.createElement("div")),o.setAttribute&&o.removeAttribute&&(o.setAttribute(e,""),i=a(o[e],"function"),a(o[e],"undefined")||(o[e]=t),o.removeAttribute(e))),o=null,i}var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),B={}.hasOwnProperty;m=a(B,"undefined")||a(B.call,"undefined")?function(e,r){return r in e&&a(e.constructor.prototype[r],"undefined")}:function(e,r){return B.call(e,r)},Function.prototype.bind||(Function.prototype.bind=function(e){var r=this;if("function"!=typeof r)throw new TypeError;var t=M.call(arguments,1),n=function(){if(this instanceof n){var o=function(){};o.prototype=r.prototype;var a=new o,i=r.apply(a,t.concat(M.call(arguments)));return Object(i)===i?i:a}return r.apply(e,t.concat(M.call(arguments)))};return n}),T.flexbox=function(){return s("flexWrap")},T.flexboxlegacy=function(){return s("boxDirection")},T.canvas=function(){var e=r.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},T.canvastext=function(){return!(!f.canvas||!a(r.createElement("canvas").getContext("2d").fillText,"function"))},T.webgl=function(){return!!e.WebGLRenderingContext},T.touch=function(){var t;return"ontouchstart"in e||e.DocumentTouch&&r instanceof DocumentTouch?t=!0:N(["@media (",I.join("touch-enabled),("),y,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){t=9===e.offsetTop}),t},T.geolocation=function(){return"geolocation"in navigator},T.postmessage=function(){return!!e.postMessage},T.websqldatabase=function(){return!!e.openDatabase},T.indexedDB=function(){return!!s("indexedDB",e)},T.hashchange=function(){return $("hashchange",e)&&(r.documentMode===t||r.documentMode>7)},T.history=function(){return!(!e.history||!history.pushState)},T.draganddrop=function(){var e=r.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},T.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},T.rgba=function(){return n("background-color:rgba(150,255,150,.5)"),i(b.backgroundColor,"rgba")},T.hsla=function(){return n("background-color:hsla(120,40%,100%,.5)"),i(b.backgroundColor,"rgba")||i(b.backgroundColor,"hsla")},T.multiplebgs=function(){return n("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(b.background)},T.backgroundsize=function(){return s("backgroundSize")},T.borderimage=function(){return s("borderImage")},T.borderradius=function(){return s("borderRadius")},T.boxshadow=function(){return s("boxShadow")},T.textshadow=function(){return""===r.createElement("div").style.textShadow},T.opacity=function(){return o("opacity:.55"),/^0.55$/.test(b.opacity)},T.cssanimations=function(){return s("animationName")},T.csscolumns=function(){return s("columnCount")},T.cssgradients=function(){var e="background-image:",r="gradient(linear,left top,right bottom,from(#9f9),to(white));",t="linear-gradient(left top,#9f9, white);";return n((e+"-webkit- ".split(" ").join(r+e)+I.join(t+e)).slice(0,-e.length)),i(b.backgroundImage,"gradient")},T.cssreflections=function(){return s("boxReflect")},T.csstransforms=function(){return!!s("transform")},T.csstransforms3d=function(){var e=!!s("perspective");return e&&"webkitPerspective"in h.style&&N("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(r){e=9===r.offsetLeft&&3===r.offsetHeight}),e},T.csstransitions=function(){return s("transition")},T.fontface=function(){var e;return N('@font-face {font-family:"font";src:url("https://")}',function(t,n){var o=r.getElementById("smodernizr"),a=o.sheet||o.styleSheet,i=a?a.cssRules&&a.cssRules[0]?a.cssRules[0].cssText:a.cssText||"":"";e=/src/i.test(i)&&0===i.indexOf(n.split(" ")[0])}),e},T.generatedcontent=function(){var e;return N(["#",y,"{font:0/0 a}#",y,':after{content:"',w,'";visibility:hidden;font:3px/1 a}'].join(""),function(r){e=r.offsetHeight>=3}),e},T.video=function(){var e=r.createElement("video"),t=!1;try{(t=!!e.canPlayType)&&(t=new Boolean(t),t.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return t},T.audio=function(){var e=r.createElement("audio"),t=!1;try{(t=!!e.canPlayType)&&(t=new Boolean(t),t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return t},T.localstorage=function(){try{return localStorage.setItem(y,y),localStorage.removeItem(y),!0}catch(e){return!1}},T.sessionstorage=function(){try{return sessionStorage.setItem(y,y),sessionStorage.removeItem(y),!0}catch(e){return!1}},T.webworkers=function(){return!!e.Worker},T.applicationcache=function(){return!!e.applicationCache},T.svg=function(){return!!r.createElementNS&&!!r.createElementNS(C.svg,"svg").createSVGRect},T.inlinesvg=function(){var e=r.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==C.svg},T.smil=function(){return!!r.createElementNS&&/SVGAnimate/.test(S.call(r.createElementNS(C.svg,"animate")))},T.svgclippaths=function(){return!!r.createElementNS&&/SVGClipPath/.test(S.call(r.createElementNS(C.svg,"clipPath")))};for(var R in T)m(T,R)&&(u=R.toLowerCase(),f[u]=T[R](),k.push((f[u]?"":"no-")+u));return f.input||d(),f.addTest=function(e,r){if("object"==typeof e)for(var n in e)m(e,n)&&f.addTest(n,e[n]);else{if(e=e.toLowerCase(),f[e]!==t)return f;r="function"==typeof r?r():r,"undefined"!=typeof g&&g&&(h.className+=" "+(r?"":"no-")+e),f[e]=r}return f},n(""),v=x=null,function(e,r){function t(e,r){var t=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return t.innerHTML="x<style>"+r+"</style>",n.insertBefore(t.lastChild,n.firstChild)}function n(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function o(e){var r=y[e[g]];return r||(r={},h++,e[g]=h,y[h]=r),r}function a(e,t,n){if(t||(t=r),d)return t.createElement(e);n||(n=o(t));var a;return a=n.cache[e]?n.cache[e].cloneNode():f.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e),!a.canHaveChildren||p.test(e)||a.tagUrn?a:n.frag.appendChild(a)}function i(e,t){if(e||(e=r),d)return e.createDocumentFragment();t=t||o(e);for(var a=t.frag.cloneNode(),i=0,l=n(),c=l.length;c>i;i++)a.createElement(l[i]);return a}function l(e,r){r.cache||(r.cache={},r.createElem=e.createElement,r.createFrag=e.createDocumentFragment,r.frag=r.createFrag()),e.createElement=function(t){return v.shivMethods?a(t,e,r):r.createElem(t)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/[\w\-]+/g,function(e){return r.createElem(e),r.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,r.frag)}function c(e){e||(e=r);var n=o(e);return!v.shivCSS||s||n.hasCSS||(n.hasCSS=!!t(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),d||l(e,n),e}var s,d,u="3.7.0",m=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",h=0,y={};!function(){try{var e=r.createElement("a");e.innerHTML="<xyz></xyz>",s="hidden"in e,d=1==e.childNodes.length||function(){r.createElement("a");var e=r.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(t){s=!0,d=!0}}();var v={elements:m.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:u,shivCSS:m.shivCSS!==!1,supportsUnknownElements:d,shivMethods:m.shivMethods!==!1,type:"default",shivDocument:c,createElement:a,createDocumentFragment:i};e.html5=v,c(r)}(this,r),f._version=p,f._prefixes=I,f._domPrefixes=A,f._cssomPrefixes=P,f.mq=E,f.hasEvent=$,f.testProp=function(e){return l([e])},f.testAllProps=s,f.testStyles=N,f.prefixed=function(e,r,t){return r?s(e,r,t):s(e,"pfx")},h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(g?" js "+k.join(" "):""),f}(this,this.document),function(e,r){Array.prototype.map||(Array.prototype.map=function(e,r){var t,n,o;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(this),i=a.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(r&&(t=r),n=new Array(i),o=0;i>o;){var l,c;o in a&&(l=a[o],c=e.call(t,l,o,a),n[o]=c),o++}return n});var t=e.detect=function(){var e=function(){},r={browser_parsers:[{regex:"^(Opera)/(\\d+)\\.(\\d+) \\(Nintendo Wii",family_replacement:"Wii",manufacturer:"Nintendo"},{regex:"(SeaMonkey|Camino)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Camino",other:!0},{regex:"(Pale[Mm]oon)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Pale Moon (Firefox Variant)",other:!0},{regex:"(Fennec)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)(pre)",family_replacment:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"Mobile.*(Firefox)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Firefox ($1)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?",family_replacement:"Firefox ($1)"},{regex:"(Firefox).*Tablet browser (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"MicroB",
tablet:!0},{regex:"(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?"},{regex:"(Flock)/(\\d+)\\.(\\d+)(b\\d+?)",family_replacement:"Flock",other:!0},{regex:"(RockMelt)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Rockmelt",other:!0},{regex:"(Navigator)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(Navigator)/(\\d+)\\.(\\d+)([ab]\\d+)",family_replacement:"Netscape"},{regex:"(Netscape6)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(MyIBrow)/(\\d+)\\.(\\d+)",family_replacement:"My Internet Browser",other:!0},{regex:"(Opera Tablet).*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera Tablet",tablet:!0},{regex:"(Opera)/.+Opera Mobi.+Version/(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"Opera Mobi",family_replacement:"Opera Mobile"},{regex:"(Opera Mini)/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera Mini)/att/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera)/9.80.*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera"},{regex:"(OPR)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera"},{regex:"(webOSBrowser)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(webOS)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(wOSBrowser).+TouchPad/(\\d+)\\.(\\d+)",family_replacement:"webOS TouchPad"},{regex:"(luakit)",family_replacement:"LuaKit",other:!0},{regex:"(Lightning)/(\\d+)\\.(\\d+)([ab]?\\d+[a-z]*)",family_replacement:"Lightning",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"rekonq",family_replacement:"Rekonq",other:!0},{regex:"(conkeror|Conkeror)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Conkeror",other:!0},{regex:"(konqueror)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Konqueror",other:!0},{regex:"(WeTab)-Browser",family_replacement:"WeTab",other:!0},{regex:"(Comodo_Dragon)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Comodo Dragon",other:!0},{regex:"(YottaaMonitor)",family_replacement:"Yottaa Monitor",other:!0},{regex:"(Kindle)/(\\d+)\\.(\\d+)",family_replacement:"Kindle"},{regex:"(Symphony) (\\d+).(\\d+)",family_replacement:"Symphony",other:!0},{regex:"Minimo",family_replacement:"Minimo",other:!0},{regex:"(Edge)/(\\d+)\\.(\\d+)",family_replacement:"Edge"},{regex:"(CrMo)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile"},{regex:"(CriOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile iOS"},{regex:"(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+) Mobile",family_replacement:"Chrome Mobile"},{regex:"(chromeframe)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Frame"},{regex:"(UC Browser)(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"UC Browser",other:!0},{regex:"(SLP Browser)/(\\d+)\\.(\\d+)",family_replacement:"Tizen Browser",other:!0},{regex:"(Epiphany)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"Epiphany",other:!0},{regex:"(SE 2\\.X) MetaSr (\\d+)\\.(\\d+)",family_replacement:"Sogou Explorer",other:!0},{regex:"(Pingdom.com_bot_version_)(\\d+)\\.(\\d+)",family_replacement:"PingdomBot",other:!0},{regex:"(facebookexternalhit)/(\\d+)\\.(\\d+)",family_replacement:"FacebookBot"},{regex:"(Twitterbot)/(\\d+)\\.(\\d+)",family_replacement:"TwitterBot"},{regex:"(AdobeAIR|Chromium|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Shiira|Sunrise|Chrome|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iron|Iris|UP\\.Browser|Bunjaloo|Google Earth|Raven for Mac)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Iron|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris)/(\\d+)\\.(\\d+)"},{regex:"(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(iCab|Lunascape|Opera|Android|Jasmine|Polaris|BREW) (\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(Android) Donut",v2_replacement:"2",v1_replacement:"1"},{regex:"(Android) Eclair",v2_replacement:"1",v1_replacement:"2"},{regex:"(Android) Froyo",v2_replacement:"2",v1_replacement:"2"},{regex:"(Android) Gingerbread",v2_replacement:"3",v1_replacement:"2"},{regex:"(Android) Honeycomb",v1_replacement:"3"},{regex:"(IEMobile)[ /](\\d+)\\.(\\d+)",family_replacement:"IE Mobile"},{regex:"(MSIE) (\\d+)\\.(\\d+).*XBLWP7",family_replacement:"IE Large Screen"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?"},{regex:"(Obigo)InternetBrowser",other:!0},{regex:"(Obigo)\\-Browser",other:!0},{regex:"(Obigo|OBIGO)[^\\d]*(\\d+)(?:.(\\d+))?",other:!0},{regex:"(MAXTHON|Maxthon) (\\d+)\\.(\\d+)",family_replacement:"Maxthon",other:!0},{regex:"(Maxthon|MyIE2|Uzbl|Shiira)",v1_replacement:"0",other:!0},{regex:"(PLAYSTATION) (\\d+)",family_replacement:"PlayStation",manufacturer:"Sony"},{regex:"(PlayStation Portable)[^\\d]+(\\d+).(\\d+)",manufacturer:"Sony"},{regex:"(BrowseX) \\((\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(POLARIS)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(Embider)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(BonEcho)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Bon Echo",other:!0},{regex:"(iPod).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(AvantGo) (\\d+).(\\d+)",other:!0},{regex:"(Avant)",v1_replacement:"1",other:!0},{regex:"^(Nokia)",family_replacement:"Nokia Services (WAP) Browser",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(BrowserNG)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/5\\.0",v2_replacement:"0",v1_replacement:"7",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/(\\d+)\\.(\\d+)",family_replacement:"Nokia OSS Browser",manufacturer:"Nokia"},{regex:"(S40OviBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Nokia Series 40 Ovi Browser",manufacturer:"Nokia"},{regex:"(Nokia)[EN]?(\\d+)",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",tablet:!0,manufacturer:"Nokia"},{regex:"(Black[bB]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",manufacturer:"RIM"},{regex:"(Black[bB]erry)\\s?(\\d+)",family_replacement:"Blackberry",manufacturer:"RIM"},{regex:"(OmniWeb)/v(\\d+)\\.(\\d+)",other:!0},{regex:"(Blazer)/(\\d+)\\.(\\d+)",family_replacement:"Palm Blazer",manufacturer:"Palm"},{regex:"(Pre)/(\\d+)\\.(\\d+)",family_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Links) \\((\\d+)\\.(\\d+)",other:!0},{regex:"(QtWeb) Internet Browser/(\\d+)\\.(\\d+)",other:!0},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",other:!0,tablet:!0},{regex:"(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Version/\\d+\\.\\d+.\\d+ Safari/",family_replacement:"WebKit Nightly"},{regex:"(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/",family_replacement:"Safari"},{regex:"(Safari)/\\d+"},{regex:"(OLPC)/Update(\\d+)\\.(\\d+)",other:!0},{regex:"(OLPC)/Update()\\.(\\d+)",v1_replacement:"0",other:!0},{regex:"(SEMC\\-Browser)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Teleca)",family_replacement:"Teleca Browser",other:!0},{regex:"Trident(.*)rv.(\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(MSIE) (\\d+)\\.(\\d+)",family_replacement:"IE"}],os_parsers:[{regex:"(Android) (\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android)\\-(\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android) Donut",os_v2_replacement:"2",os_v1_replacement:"1"},{regex:"(Android) Eclair",os_v2_replacement:"1",os_v1_replacement:"2"},{regex:"(Android) Froyo",os_v2_replacement:"2",os_v1_replacement:"2"},{regex:"(Android) Gingerbread",os_v2_replacement:"3",os_v1_replacement:"2"},{regex:"(Android) Honeycomb",os_v1_replacement:"3"},{regex:"(Silk-Accelerated=[a-z]{4,5})",os_replacement:"Android"},{regex:"(Windows Phone 6\\.5)"},{regex:"(Windows (?:NT 5\\.2|NT 5\\.1))",os_replacement:"Windows XP"},{regex:"(XBLWP7)",os_replacement:"Windows Phone OS"},{regex:"(Windows NT 6\\.1)",os_replacement:"Windows 7"},{regex:"(Windows NT 6\\.0)",os_replacement:"Windows Vista"},{regex:"(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000)"},{regex:"(Windows NT 6\\.4|Windows NT 10\\.0)",os_replacement:"Windows 10"},{regex:"(Windows NT 6\\.2)",os_replacement:"Windows 8"},{regex:"(Windows Phone 8)",os_replacement:"Windows Phone 8"},{regex:"(Windows NT 5\\.0)",os_replacement:"Windows 2000"},{regex:"(Windows Phone OS) (\\d+)\\.(\\d+)"},{regex:"(Windows ?Mobile)",os_replacement:"Windows Mobile"},{regex:"(WinNT4.0)",os_replacement:"Windows NT 4.0"},{regex:"(Win98)",os_replacement:"Windows 98"},{regex:"(Tizen)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Mac OS X) (\\d+)[_.](\\d+)(?:[_.](\\d+))?",manufacturer:"Apple"},{regex:"(?:PPC|Intel) (Mac OS X)",manufacturer:"Apple"},{regex:"(CPU OS|iPhone OS) (\\d+)_(\\d+)(?:_(\\d+))?",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod); Opera",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPad); Opera",tablet:!0,manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod).*Mac OS X.*Version/(\\d+)\\.(\\d+)",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(CrOS) [a-z0-9_]+ (\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"Chrome OS"},{regex:"(Debian)-(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Linux Mint)(?:/(\\d+))?",other:!0},{regex:"(Mandriva)(?: Linux)?/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Symbian[Oo][Ss])/(\\d+)\\.(\\d+)",os_replacement:"Symbian OS"},{regex:"(Symbian/3).+NokiaBrowser/7\\.3",os_replacement:"Symbian^3 Anna"},{regex:"(Symbian/3).+NokiaBrowser/7\\.4",os_replacement:"Symbian^3 Belle"},{regex:"(Symbian/3)",os_replacement:"Symbian^3"},{regex:"(Series 60|SymbOS|S60)",os_replacement:"Symbian OS"},{regex:"(MeeGo)",other:!0},{regex:"Symbian [Oo][Ss]",os_replacement:"Symbian OS"},{regex:"(Black[Bb]erry)[0-9a-z]+/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(Black[Bb]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(RIM Tablet OS) (\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Play[Bb]ook)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry)",os_replacement:"Blackberry OS",manufacturer:"RIM"},{regex:"(webOS|hpwOS)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"webOS"},{regex:"(SUSE|Fedora|Red Hat|PCLinuxOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(SUSE|Fedora|Red Hat|Puppy|PCLinuxOS|CentOS)/(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(Ubuntu|Kindle|Bada|Lubuntu|BackTrack|Red Hat|Slackware)/(\\d+)\\.(\\d+)"},{regex:"(Windows|OpenBSD|FreeBSD|NetBSD|Ubuntu|Kubuntu|Android|Arch Linux|CentOS|WeTab|Slackware)"},{regex:"(Linux|BSD)",other:!0}],mobile_os_families:["Windows Phone 6.5","Windows CE","Symbian OS"],device_parsers:[{regex:"HTC ([A-Z][a-z0-9]+) Build",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Z][a-z0-9 ]+) \\d+\\.\\d+\\.\\d+\\.\\d+",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_Touch_([A-Za-z0-9]+)",device_replacement:"HTC Touch ($1)",manufacturer:"HTC"},{regex:"USCCHTC(\\d+)",device_replacement:"HTC $1 (US Cellular)",manufacturer:"HTC"},{regex:"Sprint APA(9292)",device_replacement:"HTC $1 (Sprint)",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+ [A-Z])",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC-([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(ADR[A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(HTC)",manufacturer:"HTC"},{regex:"SonyEricsson([A-Za-z0-9]+)/",device_replacement:"Ericsson $1",other:!0,manufacturer:"Sony"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; WOWMobile (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\-update1\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; (.+) Build"},{regex:"NokiaN([0-9]+)",device_replacement:"Nokia N$1",manufacturer:"Nokia"},{regex:"Nokia([A-Za-z0-9\\v-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"NOKIA ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Nokia ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Lumia ([A-Za-z0-9\\-]+)",device_replacement:"Lumia $1",manufacturer:"Nokia"},{regex:"Symbian",device_replacement:"Nokia",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS",device_replacement:"Blackberry Playbook",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry [0-9]+);",manufacturer:"RIM"},{regex:"Black[Bb]erry([0-9]+)",device_replacement:"BlackBerry $1",manufacturer:"RIM"},{regex:"(Pre)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Pixi)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pixi",manufacturer:"Palm"},{regex:"(Touchpad)/(\\d+)\\.(\\d+)",device_replacement:"HP Touchpad",manufacturer:"HP"},{regex:"HPiPAQ([A-Za-z0-9]+)/(\\d+).(\\d+)",device_replacement:"HP iPAQ $1",manufacturer:"HP"},{regex:"Palm([A-Za-z0-9]+)",device_replacement:"Palm $1",manufacturer:"Palm"},{regex:"Treo([A-Za-z0-9]+)",device_replacement:"Palm Treo $1",manufacturer:"Palm"},{regex:"webOS.*(P160UNA)/(\\d+).(\\d+)",device_replacement:"HP Veer",manufacturer:"HP"},{regex:"(Kindle Fire)",manufacturer:"Amazon"},{regex:"(Kindle)",manufacturer:"Amazon"},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",device_replacement:"Kindle Fire",tablet:!0,manufacturer:"Amazon"},{regex:"(iPad) Simulator;",manufacturer:"Apple"},{regex:"(iPad);",manufacturer:"Apple"},{regex:"(iPod);",manufacturer:"Apple"},{regex:"(iPhone) Simulator;",manufacturer:"Apple"},{regex:"(iPhone);",manufacturer:"Apple"},{regex:"Nexus\\ ([A-Za-z0-9\\-]+)",device_replacement:"Nexus $1"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"Amoi\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"AMOI\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"Asus\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"ASUS\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"BIRD\\-([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD\\.([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD ([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"Dell ([A-Za-z0-9]+)",device_replacement:"Dell $1",manufacturer:"Dell"},{regex:"DoCoMo/2\\.0 ([A-Za-z0-9]+)",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\_W\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"vodafone([A-Za-z0-9]+)",device_replacement:"Huawei Vodafone $1",other:!0},{regex:"i\\-mate ([A-Za-z0-9]+)",device_replacement:"i-mate $1",other:!0},{regex:"Kyocera\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"KWC\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"Lenovo\\-([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Lenovo"},{regex:"Lenovo\\_([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Levovo"},{regex:"LG/([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE VX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG ([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE LG\\-AX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"(KIN)\\.One (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(KIN)\\.Two (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(Motorola)\\-([A-Za-z0-9]+)",manufacturer:"Motorola"},{regex:"MOTO\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"MOT\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"Philips([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"Philips ([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"SAMSUNG-([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"SAMSUNG\\; ([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"Softbank/1\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"Softbank/2\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"(hiptop|avantgo|plucker|xiino|blazer|elaine|up.browser|up.link|mmp|smartphone|midp|wap|vodafone|o2|pocket|mobile|pda)",device_replacement:"Generic Smartphone"},{regex:"^(1207|3gso|4thp|501i|502i|503i|504i|505i|506i|6310|6590|770s|802s|a wa|acer|acs\\-|airn|alav|asus|attw|au\\-m|aur |aus |abac|acoo|aiko|alco|alca|amoi|anex|anny|anyw|aptu|arch|argo|bell|bird|bw\\-n|bw\\-u|beck|benq|bilb|blac|c55/|cdm\\-|chtm|capi|comp|cond|craw|dall|dbte|dc\\-s|dica|ds\\-d|ds12|dait|devi|dmob|doco|dopo|el49|erk0|esl8|ez40|ez60|ez70|ezos|ezze|elai|emul|eric|ezwa|fake|fly\\-|fly\\_|g\\-mo|g1 u|g560|gf\\-5|grun|gene|go.w|good|grad|hcit|hd\\-m|hd\\-p|hd\\-t|hei\\-|hp i|hpip|hs\\-c|htc |htc\\-|htca|htcg)",device_replacement:"Generic Feature Phone"},{regex:"^(htcp|htcs|htct|htc\\_|haie|hita|huaw|hutc|i\\-20|i\\-go|i\\-ma|i230|iac|iac\\-|iac/|ig01|im1k|inno|iris|jata|java|kddi|kgt|kgt/|kpt |kwc\\-|klon|lexi|lg g|lg\\-a|lg\\-b|lg\\-c|lg\\-d|lg\\-f|lg\\-g|lg\\-k|lg\\-l|lg\\-m|lg\\-o|lg\\-p|lg\\-s|lg\\-t|lg\\-u|lg\\-w|lg/k|lg/l|lg/u|lg50|lg54|lge\\-|lge/|lynx|leno|m1\\-w|m3ga|m50/|maui|mc01|mc21|mcca|medi|meri|mio8|mioa|mo01|mo02|mode|modo|mot |mot\\-|mt50|mtp1|mtv |mate|maxo|merc|mits|mobi|motv|mozz|n100|n101|n102|n202|n203|n300|n302|n500|n502|n505|n700|n701|n710|nec\\-|nem\\-|newg|neon)",device_replacement:"Generic Feature Phone"},{regex:"^(netf|noki|nzph|o2 x|o2\\-x|opwv|owg1|opti|oran|ot\\-s|p800|pand|pg\\-1|pg\\-2|pg\\-3|pg\\-6|pg\\-8|pg\\-c|pg13|phil|pn\\-2|pt\\-g|palm|pana|pire|pock|pose|psio|qa\\-a|qc\\-2|qc\\-3|qc\\-5|qc\\-7|qc07|qc12|qc21|qc32|qc60|qci\\-|qwap|qtek|r380|r600|raks|rim9|rove|s55/|sage|sams|sc01|sch\\-|scp\\-|sdk/|se47|sec\\-|sec0|sec1|semc|sgh\\-|shar|sie\\-|sk\\-0|sl45|slid|smb3|smt5|sp01|sph\\-|spv |spv\\-|sy01|samm|sany|sava|scoo|send|siem|smar|smit|soft|sony|t\\-mo|t218|t250|t600|t610|t618|tcl\\-|tdg\\-|telm|tim\\-|ts70|tsm\\-|tsm3|tsm5|tx\\-9|tagt)",device_replacement:"Generic Feature Phone"},{regex:"^(talk|teli|topl|tosh|up.b|upg1|utst|v400|v750|veri|vk\\-v|vk40|vk50|vk52|vk53|vm40|vx98|virg|vite|voda|vulc|w3c |w3c\\-|wapj|wapp|wapu|wapm|wig |wapi|wapr|wapv|wapy|wapa|waps|wapt|winc|winw|wonu|x700|xda2|xdag|yas\\-|your|zte\\-|zeto|aste|audi|avan|blaz|brew|brvw|bumb|ccwa|cell|cldc|cmd\\-|dang|eml2|fetc|hipt|http|ibro|idea|ikom|ipaq|jbro|jemu|jigs|keji|kyoc|kyok|libw|m\\-cr|midp|mmef|moto|mwbp|mywa|newt|nok6|o2im|pant|pdxg|play|pluc|port|prox|rozo|sama|seri|smal|symb|treo|upsi|vx52|vx53|vx60|vx61|vx70|vx80|vx81|vx83|vx85|wap\\-|webc|whit|wmlb|xda\\-|xda\\_)",device_replacement:"Generic Feature Phone"},{regex:"(bot|borg|google(^tv)|yahoo|slurp|msnbot|msrbot|openbot|archiver|netresearch|lycos|scooter|altavista|teoma|gigabot|baiduspider|blitzbot|oegp|charlotte|furlbot|http%20client|polybot|htdig|ichiro|mogimogi|larbin|pompos|scrubby|searchsight|seekbot|semanticdiscovery|silk|snappy|speedy|spider|voila|vortex|voyager|zao|zeal|fast\\-webcrawler|converacrawler|dataparksearch|findlinks)",device_replacement:"Spider"}],mobile_browser_families:["Firefox Mobile","Opera Mobile","Opera Mini","Mobile Safari","webOS","IE Mobile","Playstation Portable","Nokia","Blackberry","Palm","Silk","Android","Maemo","Obigo","Netfront","AvantGo","Teleca","SEMC-Browser","Bolt","Iris","UP.Browser","Symphony","Minimo","Bunjaloo","Jasmine","Dolfin","Polaris","BREW","Chrome Mobile","Chrome Mobile iOS","UC Browser","Tizen Browser"]};e.parsers=["device_parsers","browser_parsers","os_parsers","mobile_os_families","mobile_browser_families"],e.types=["browser","os","device"],e.regexes=r||function(){var r={};return e.parsers.map(function(e){r[e]=[]}),r}(),e.families=function(){var r={};return e.types.map(function(e){r[e]=[]}),r}();var t=Array.prototype,n=(Object.prototype,Function.prototype,t.forEach),o=(t.indexOf,function(e,r){for(var t={},n=0;n<r.length&&!(t=r[n](e));n++);return t}),a=function(e,r){i(e,function(e){i(r,function(r){delete e[r]})})},i=forEach=function(e,r,t){if(null!=e)if(n&&e.forEach===n)e.forEach(r,t);else if(e.length===+e.length)for(var o=0,a=e.length;a>o;o++)r.call(t,e[o],o,e);else for(var i in e)_.has(e,i)&&r.call(t,e[i],i,e)},l=function(e){return!(!e||"undefined"==typeof e||null==e)},c=function(e){var r="";return e=e||{},l(e)&&l(e.major)&&(r+=e.major,l(e.minor)&&(r+="."+e.minor,l(e.patch)&&(r+="."+e.patch))),r},s=function(e){e=e||{};var r=c(e);return r&&(r=" "+r),e&&l(e.family)?e.family+r:""};return e.parse=function(r){var t=function(r){return e.regexes[r+"_parsers"].map(function(e){function t(r){var t=r.match(n);if(!t)return null;var i={};return i.family=(o?o.replace("$1",t[1]):t[1])||"other",i.major=parseInt(a?a:t[2])||null,i.minor=t[3]?parseInt(t[3]):null,i.patch=t[4]?parseInt(t[4]):null,i.tablet=e.tablet,i.man=e.manufacturer||null,i}var n=new RegExp(e.regex),o=e[("browser"===r?"family":r)+"_replacement"],a=e.major_version_replacement;return t})},n=function(){},i=t("browser"),d=t("os"),u=t("device"),m=new n;m.source=r,m.browser=o(r,i),l(m.browser)?(m.browser.name=s(m.browser),m.browser.version=c(m.browser)):m.browser={},m.os=o(r,d),l(m.os)?(m.os.name=s(m.os),m.os.version=c(m.os)):m.os={},m.device=o(r,u),l(m.device)?(m.device.name=s(m.device),m.device.version=c(m.device)):m.device={tablet:!1,family:"Other"};var p={};e.regexes.mobile_browser_families.map(function(e){p[e]=!0}),e.regexes.mobile_os_families.map(function(e){p[e]=!0});return"Spider"===m.browser.family?m.device.type="Spider":m.browser.tablet||m.os.tablet||m.device.tablet?m.device.type="Tablet":p.hasOwnProperty(m.browser.family)?m.device.type="Mobile":m.device.type="Desktop",m.device.manufacturer=m.browser.man||m.os.man||m.device.man||null,a([m.browser,m.os,m.device],["tablet","man"]),m},e}();"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.detect=t):e.detect=t,"function"==typeof define&&define.amd&&define(function(e){return t})}(window),function(){"use strict";function e(e,r){r.html5Mode(!0),e.when("/",{title:"Home",templateUrl:"/templates/welcome/welcome.html",controller:"WelcomeController",controllerAs:"vm",resolve:{mode:function(){return"nearby"}}}).when("/property/:propertyId/near-me/",{title:"Near Me",templateUrl:"/templates/recommendation/list.html",controller:"RecommendationController",controllerAs:"vm",resolve:{mode:function(){return"nearby"}}}).when("/property/:propertyId/search/",{title:"Search",templateUrl:"/templates/recommendation/list.html",controller:"RecommendationController",controllerAs:"vm",resolve:{mode:function(){return"search"}}}).when("/property/:propertyId/recommendations/",{title:"Recommendations",templateUrl:"/templates/recommendation/list.html",controller:"RecommendationController",controllerAs:"vm",resolve:{mode:function(){return"list"}}}).when("/property/:propertyId/recommendations/:recommendationId/",{title:"Detail",templateUrl:"/templates/recommendation/detail.html",controller:"RecommendationDetailController",controllerAs:"vm"}).when("/property/:propertyId/featured-concierge/:localistaId/",{title:"Featured Concierge",templateUrl:"/templates/property/featured-explorer.html",controller:"FeaturedExplorerController",controllerAs:"vm"}).when("/property/:propertyId/featured-concierge/:localistaId/recommendations/",{title:"Recommendations",templateUrl:"/templates/recommendation/list.html",controller:"RecommendationController",controllerAs:"vm",resolve:{mode:function(){return"featured-explorer"}}}).when("/property/:propertyId/explore/",{title:"Moods",templateUrl:"/templates/explore/list.html",controller:"ExploreController",controllerAs:"vm"}).when("/property/:propertyId/featured-recommendations/",{title:"Featured Recommendations",templateUrl:"/templates/recommendation/list.html",controller:"RecommendationController",controllerAs:"vm",resolve:{mode:function(){return"here-for-a-day"}}}).when("/privacy-policy/",{title:"Privacy Policy",templateUrl:"/templates/static/privacy-policy.html"}).when("/terms-and-conditions/",{title:"Terms and Conditions",templateUrl:"/templates/static/terms.html"}).when("/cookie-statement/",{title:"Cookie Statement",templateUrl:"/templates/static/cookie-statement.html"}).when("/security-and-safety/",{title:"Safety and Security",templateUrl:"/templates/static/security.html"}).when("/404/",{title:"Page Not Found",templateUrl:"/templates/errors/404.html"}).otherwise({redirectTo:"/404/"})}angular.module("ourstay").config(e),e.$inject=["$routeProvider","$locationProvider"]}(),function(){"use strict";angular.module("ourstay").constant("_",window._).constant("Modernizr",Modernizr).constant("PointerEventsPolyfill",window.PointerEventsPolyfill).constant("google",google)}();